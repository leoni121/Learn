[TOC]
> 初始化 `webpackJsonp` 和`__webpack_require__`  和 一些变量，如：`installedModules`、`installedChunks`。只有`webpackJson`暴露给 `window` 对象，其他的都是通过 **形参** 和 **闭包**的使用
>
> ```js
> (function(modules) {
> var parentJsonpFunction = window["webpackJsonp"];
> window["webpackJsonp"] = function webpackJsonpCallback(chunkIds, moreModules) {
>   // 缓存检测 加入缓存区 构成 callback
>   while(callbacks.length)
>     callbacks.shift().call(null, __webpack_require__);
>   var installedModules = {};
>   var installedChunks = {..};
>   function __webpack_require__(moduleId) {
>         // 判断是否在缓存`installedModules`得到 对应module
>         return module.exports;
>   }
>  })({2: function(module, exports) {...}});
>      
>      
> webpackJsonp([0],[
>   function(module, exports, __webpack_require__) {
>       var dependency = __webpack_require__(1);
>       var common = __webpack_require__(2);
>       // module handle
>   },
>   function(module, exports) {
>       module.exports = {name: 'dependency'};
>   }
> ]);
> ```
>
> 

（1）`common ` 模块注册 `webpackJsonp`

```js
// modules
{
    2: function (module, exports, ca) {}
}
```

（2）`index_one.bundle.js` 运行 `webpackJsonp`

```js
// modules
{
    0: function (module, exports, __webpack_require__, aa){...}
    1: function (module, exports, ab){...}
    2: function (module, exports, ca) {...}
}
```

（3） `webpackJsonp` 执行 `__webpack_require__(0)`

（4）`__webpack_require__` 函数里面

```js
modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
// 这里是入口函数，执行完这个之后返回
```

（5）执行（4）中方法的两个`__webpack_require__`, 分别返回模块。

```js
var dependency = __webpack_require__(1);
// 1 {exports: {…}, id: 1, loaded: false}

var common = __webpack_require__(2);
// 2 {exports: {…}, id: 2, loaded: false}
```

（6） 

```js
console.log('index_one: ', dependency.name, common.name);
```

（7）（3）中__webpack_require__(0)执行完成，当前的无模块返回  =》 0 {exports: {…}, id: 0, loaded: false}

（8）`chunk1` 执行 （2） =>（7）
    (chunk0) 运行webpackJsonp, 结果（）
     

```js
// modules
// 把先前的数组的 idx = 0 给换了
{
    0: function (module, exports, __webpack_require__, ba) {...}
    1: function (module, exports, ab) {...}                    
    2: function (module, exports, ca) {...}                
}
```

（9）webpackJsonp 执行 __webpack_require__(0)

（10）__webpack_require__ 函数里面 执行

```js
modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);这

//里是入口函数，执行完这个之后返回
```

（11）执行（10）中方法的一个 __webpack_require__, 分别返回模块。（应为有缓存，直接得到结果，和（5）中一样）
    

```js
var common = __webpack_require__(2);      
// 2 {exports: {…}, id: 2, loaded: false}
```

（12）

```js
console.log('index_two:', common.name);
```

（13）（9）中 __webpack_require__(0) 执行完成，当前的无模块返回  =》 0 {exports: {…}, id: 0, loaded: false}
