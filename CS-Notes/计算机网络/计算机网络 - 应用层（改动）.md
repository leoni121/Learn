[TOC]

# 域名系统

DNS 是一个分布式数据库，提供了主机名和 IP 地址之间相互转换的服务。

域名具有层次结构，从上到下依次为：**根域名、顶级域名、二级域名**。

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/b54eeb16-0b0e-484c-be62-306f57c40d77.jpg"/> </div><br>
**三种类型**：**根**域名服务器， **顶级**域（Top-Level Domain, TLD ）域名服务器和权威**域名**服务器，分别对应下面三个层次（从上至下）

> 顶级域名服务器：
>
> 1. 国家顶级域名服务器
> 2. 通用顶级域名服务器

DNS 可以使用 UDP 或者 TCP 进行传输，使用的**端口号都为 53**。大多数情况下 DNS 使用 UDP 进行传输，这就要求域名解析器和域名服务器都必须自己处理超时和重传从而保证可靠性。在两种情况下会使用 TCP 进行传输：

- 如果返回的响应超过的 512 字节（UDP 最大只支持 512 字节的数据）。
- 区域传送（区域传送是主域名服务器向辅助域名服务器传送变化的那部分数据）。

## 本地域名服务器

**什么是？**

1. 电脑上网时IPv4或者IPv6设置中填写的那个DNS（手工指定的或者是DHCP自动分配的）
2. 上层ISP的DNS

**作用**

1. 代理，将请求转发到DNS服务器层次结构中
2. 减少对相同主机名的查询而消耗的时间，改善时延和性能



# 文件传送协议

FTP 使用 TCP 进行连接，它需要两个连接来传送一个文件：

- **控制连接**：服务器打开端口号 21 等待客户端的连接，客户端主动建立连接后，使用这个连接将客户端的命令传送给服务器，并传回服务器的应答。
- **数据连接**：用来传送一个文件数据。

# 动态主机配置协议

DHCP (Dynamic Host Configuration Protocol) 提供了**即插即用**的连网方式，用户不再需要手动配置 IP 地址等信息。

# 远程登录协议

TELNET 用于登录到远程主机上，并且远程主机上的输出也会返回。

# 电子邮件协议

## 1. SMTP

SMTP 只能发送 ASCII 码，而互联网邮件扩充 MIME 可以发送二进制文件。MIME 并没有改动或者取代 SMTP，而是增加邮件主体的结构，定义了非 ASCII 码的编码规则。

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ed5522bb-3a60-481c-8654-43e7195a48fe.png" width=""/> </div><br>
## 2. POP3

POP3 的特点是只要用户从服务器上读取了邮件，就把该邮件删除。

## 3. IMAP

IMAP 协议中客户端和服务器上的邮件保持同步，如果不手动删除邮件，那么服务器上的邮件也不会被删除。IMAP 这种做法可以让用户随时随地去访问服务器上的邮件。

# 常用端口

|应用| 应用层协议 | 端口号 | 传输层协议 | 备注 |
| :---: | :--: | :--: | :--: | :--: |
| 域名解析 | DNS | 53 | UDP/TCP | 长度超过 512 字节时使用 TCP |
| 动态主机配置协议 | DHCP | 67/68 | UDP | |
| 文件传送协议 | FTP | 20/21 | TCP | 控制连接 21，数据连接 20 |
| 远程终端协议 | TELNET | 23 | TCP | |
| 超文本传送协议 | HTTP | 80 | TCP | |
| 简单邮件传送协议 | SMTP | 25 | TCP | |
| 邮件读取协议 | POP3 | 110 | TCP | |
| 网际报文存取协议 | IMAP | 143 | TCP | |
